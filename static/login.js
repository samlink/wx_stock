document.querySelector("#login-button").addEventListener("click",(function(event){event.preventDefault();var name=document.querySelector("#login-name").value.trim(),login_pass=document.querySelector("#login-pass").value.trim();if(""==name||""==login_pass)return notifier.show("用户名或密码不能为空","danger"),!1;var user={area:"天津",name:name,password:login_pass};fetch("/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(user)}).then((res=>res.json())).then((data=>{-1==data?notifier.show("用户不存在","danger"):-2==data?notifier.show("等待管理员确认","warning"):0!=data&&data<6?(notifier.show("密码错误","danger"),setTimeout((()=>notifier.show("还有 "+data+" 次机会","warning")),500)):0==data||data>=6?notifier.show("帐户被锁定，请联系管理员","danger"):window.location="/"}))})),document.querySelector("#forget-pass").addEventListener("click",(function(){let name=document.querySelector("#login-name").value.trim();if(""==name)return notifier.show("用户名不能为空","danger"),!1;var user={area:"",name:name,password:""};fetch("/forget_pass",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(user)}).then((res=>res.json())).then((data=>{-1==data?notifier.show("用户不存在或待确认","danger"):-2==data?notifier.show("用户没有预留手机号","danger"):-3==data?notifier.show("找回密码机会已用完","danger"):-4==data?notifier.show("帐户被锁定，请联系管理员","danger"):(notifier.show("新密码已发送至预留手机号","success"),setTimeout((()=>notifier.show("还有 "+data+" 次找回密码的机会","info")),500))}))}));