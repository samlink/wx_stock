let page_cart=function(){if(!getCookie("wxok"))return void(window.location.href="/");let cartData={items:[],total_count:0,total_length:0,total_weight:0},currentDeleteItem=null,isLoading=!1;const lang=localStorage.getItem("language")||"zh",texts={zh:{cartTitle:"购物车",totalItems:"商品总数：",totalLength:"总长度：",totalWeight:"总重量：",submitOrder:"提交订购",clearCart:"清空购物车",refresh:"刷新",confirmDelete:"确认删除",confirmDeleteMsg:"确定要从购物车中删除这个商品吗？",confirmClear:"确认清空",confirmClearMsg:"确定要清空整个购物车吗？此操作不可撤销。",confirmSubmit:"确认提交订单",confirmSubmitMsg:"确定要提交这个订单吗？",orderSuccess:"订单提交成功",orderSuccessMsg:"您的订单已成功提交！",orderNumber:"订单号：",orderTime:"提交时间：",cancel:"取消",delete:"删除",clear:"清空",confirm:"确定",loading:"加载中...",noItems:"购物车为空",networkError:"网络连接失败",serverError:"服务器错误",operationSuccess:"操作成功",operationFailed:"操作失败",stockInsufficient:"库存不足",quantityUpdated:"数量已更新",itemRemoved:"商品已删除",cartCleared:"购物车已清空",orderSubmitted:"订单已提交"},en:{cartTitle:"Shopping Cart",totalItems:"Total Items:",totalLength:"Total Length:",totalWeight:"Total Weight:",submitOrder:"Submit Order",clearCart:"Clear Cart",refresh:"Refresh",confirmDelete:"Confirm Delete",confirmDeleteMsg:"Are you sure you want to remove this item from cart?",confirmClear:"Confirm Clear",confirmClearMsg:"Are you sure you want to clear the entire cart? This action cannot be undone.",confirmSubmit:"Confirm Submit Order",confirmSubmitMsg:"Are you sure you want to submit this order?",orderSuccess:"Order Submitted Successfully",orderSuccessMsg:"Your order has been submitted successfully!",orderNumber:"Order Number:",orderTime:"Submit Time:",cancel:"Cancel",delete:"Delete",clear:"Clear",confirm:"Confirm",loading:"Loading...",noItems:"Cart is empty",networkError:"Network connection failed",serverError:"Server error",operationSuccess:"Operation successful",operationFailed:"Operation failed",stockInsufficient:"Insufficient stock",quantityUpdated:"Quantity updated",itemRemoved:"Item removed",cartCleared:"Cart cleared",orderSubmitted:"Order submitted"}};function initPage(){document.title=texts[lang].cartTitle,function(){if("en"===lang){const cartTitle=document.querySelector(".cart-title");cartTitle&&(cartTitle.innerHTML='<i class="fa fa-shopping-cart"></i> Shopping Cart');const clearCartBtn=document.querySelector("#clear-cart-btn");clearCartBtn&&(clearCartBtn.innerHTML='<i class="fa fa-trash"></i> Clear Cart');const refreshCartBtn=document.querySelector("#refresh-cart-btn");refreshCartBtn&&(refreshCartBtn.innerHTML='<i class="fa fa-refresh"></i> Refresh');const submitOrderBtn=document.querySelector("#submit-order-btn");submitOrderBtn&&(submitOrderBtn.innerHTML='<i class="fa fa-check"></i> Submit Order');const tableHeaders=document.querySelectorAll(".table-cart thead th"),headerTexts=["No.","Product Name","Stock No.","Dia./OD*WT mm","Condition","Standard","Manufacturer","Heat No.","Length (mm)","Weight (kg)","Added Time","Actions"];tableHeaders.forEach(((th,index)=>{index<headerTexts.length&&(th.textContent=headerTexts[index])}));const summaryLabels=document.querySelectorAll(".summary-label");summaryLabels[0]&&(summaryLabels[0].textContent="Total Items:"),summaryLabels[1]&&(summaryLabels[1].textContent="Total Length:"),summaryLabels[2]&&(summaryLabels[2].textContent="Total Weight:"),updateModalText("#confirm-delete-modal",{title:"Confirm Delete",body:"Are you sure you want to remove this item from cart?",cancel:"Cancel",confirm:"Delete"}),updateModalText("#confirm-clear-modal",{title:"Confirm Clear",body:"Are you sure you want to clear the entire cart? This action cannot be undone.",cancel:"Cancel",confirm:"Clear"}),updateModalText("#confirm-submit-modal",{title:"Confirm Submit Order",body:"Are you sure you want to submit this order?",cancel:"Cancel",confirm:"Confirm"});const submitModalLabels=document.querySelectorAll("#confirm-submit-modal .label");submitModalLabels[0]&&(submitModalLabels[0].textContent="Total Items:"),submitModalLabels[1]&&(submitModalLabels[1].textContent="Total Length:"),submitModalLabels[2]&&(submitModalLabels[2].textContent="Total Weight:"),updateModalText("#order-success-modal",{title:"Order Submitted Successfully",body:"Your order has been submitted successfully!",confirm:"OK"});const orderInfoLabels=document.querySelectorAll("#order-success-modal strong");orderInfoLabels[0]&&(orderInfoLabels[0].textContent="Order Number:"),orderInfoLabels[1]&&(orderInfoLabels[1].textContent="Submit Time:")}!function(){const theadRow=document.querySelector(".table-cart thead tr");if(!theadRow)return;const headersZh=["序号","商品名称","材质","物料号","规格型号","状态","库存长度(mm)","库存重量(kg)","订购长度(mm)","订购数量","订购重量(kg)","备注","操作"],headersEn=["No.","Product Name","Material","Stock No.","Dia./OD*WT mm","Condition","Length (mm)","Weight (kg)","Order Length (mm)","Quantity","Order Weight (kg)","Note","Actions"],headers="en"===lang?headersEn:headersZh;theadRow.innerHTML=headers.map(((h,idx)=>0===idx?`<th width="4%">${h}</th>`:9===idx?`<th width="6%">${h}</th>`:11===idx?`<th width="15%">${h}</th>`:`<th>${h}</th>`)).join("")}()}(),function(){document.getElementById("refresh-cart-btn").addEventListener("click",(()=>{loadCartData()})),document.getElementById("clear-cart-btn").addEventListener("click",(()=>{!function(){if(0===cartData.items.length)return void notifier.show(texts[lang].noItems,"warning",3e3);document.getElementById("confirm-clear-modal").style.display="block"}()})),document.addEventListener("input",(e=>{(e.target.classList.contains("order-length-input")||e.target.classList.contains("order-quantity-input"))&&updateOrderWeight(e.target)})),document.getElementById("submit-order-btn").addEventListener("click",(()=>{!function(){if(0===cartData.items.length)return void notifier.show(texts[lang].noItems,"warning",3e3);document.getElementById("submit-total-items").textContent=cartData.total_count||0;const tbody=document.getElementById("cart-items-tbody"),rows=tbody?Array.from(tbody.querySelectorAll("tr[data-material]")):[];let totalOrderedLength=0;rows.forEach((row=>{const len=Number(row.dataset.orderLength||(row.querySelector(".order-length-input")?.value??"0"))||0,qty=parseInt(row.dataset.orderQuantity||String(row.querySelector(".order-quantity-input")?.value??"0"),10)||0;totalOrderedLength+=len*qty})),document.getElementById("submit-total-length").textContent=`${totalOrderedLength} mm`;let totalOrderedWeight=0;rows.forEach((row=>{let weight=Number(row.dataset.orderWeight||"0");if(!isFinite(weight)||weight<=0){const weightText=row.querySelector(".order-weight")?.textContent||"0";weight=Number(weightText.replace(/[^0-9.]/g,""))||0}totalOrderedWeight+=weight})),document.getElementById("submit-total-weight").textContent=`${totalOrderedWeight.toFixed(1)} kg`,document.getElementById("confirm-submit-modal").style.display="block"}()})),document.getElementById("cancel-delete").addEventListener("click",(()=>{hideDeleteConfirmModal()})),document.getElementById("confirm-delete").addEventListener("click",(()=>{currentDeleteItem&&async function(materialNumber){if(isLoading)return;try{hideDeleteConfirmModal();const response=await fetch("/stock/remove_from_cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:Number(document.querySelector("#user-id").textContent.trim()),material_number:materialNumber})});if(response.ok){const result=await response.json();if(result.success){const currentCount=cartData.total_count||0;currentCount>1?function(newCount){const cartBadge=document.querySelector("#cart-count");if(!cartBadge)return;cartBadge.classList.add("cart-count-animate"),setTimeout((()=>{newCount>0?cartBadge.textContent=newCount:cartBadge.style.display="none"}),150),setTimeout((()=>{cartBadge.classList.remove("cart-count-animate")}),600)}(currentCount-1):animateCartBadgeClear(),setTimeout((async()=>{await loadCartData()}),200),notifier.show(texts[lang].itemRemoved,"success",2e3)}else notifier.show(result.message||texts[lang].operationFailed,"danger",4e3)}else console.error("Remove item failed with status:",response.status),notifier.show(texts[lang].serverError,"danger",4e3)}catch(error){console.error("Error removing item:",error),notifier.show(texts[lang].networkError,"danger",4e3)}}(currentDeleteItem)})),document.getElementById("close-delete-modal").addEventListener("click",(()=>{hideDeleteConfirmModal()})),document.getElementById("cancel-clear").addEventListener("click",(()=>{hideClearConfirmModal()})),document.getElementById("confirm-clear").addEventListener("click",(()=>{!async function(){if(isLoading)return;try{hideClearConfirmModal();const response=await fetch("/stock/clear_cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:Number(document.querySelector("#user-id").textContent.trim())})});if(response.ok){const result=await response.json();result.success?(animateCartBadgeClear(),setTimeout((async()=>{await loadCartData()}),350),notifier.show(texts[lang].cartCleared,"success",2e3)):notifier.show(result.message||texts[lang].operationFailed,"danger",4e3)}else console.error("Clear cart failed with status:",response.status),notifier.show(texts[lang].serverError,"danger",4e3)}catch(error){console.error("Error clearing cart:",error),notifier.show(texts[lang].networkError,"danger",4e3)}}()})),document.getElementById("close-clear-modal").addEventListener("click",(()=>{hideClearConfirmModal()})),document.getElementById("cancel-submit").addEventListener("click",(()=>{hideSubmitConfirmModal()})),document.getElementById("confirm-submit").addEventListener("click",(()=>{!async function(){if(isLoading)return;try{isLoading=!0,hideSubmitConfirmModal();const tbody=document.getElementById("cart-items-tbody"),rows=tbody?Array.from(tbody.querySelectorAll("tr[data-material]")):[];if(0===rows.length)return console.warn("No rows found in cart table when submitting order"),notifier&&notifier.show&&notifier.show(texts[lang].noItems,"warning",3e3),void(isLoading=!1);const orderItems=rows.map((row=>{const material_number=row.getAttribute("data-material"),lengthInput=row.querySelector(".order-length-input"),qtyInput=row.querySelector(".order-quantity-input"),noteInput=row.querySelector(".order-note-input"),weightCell=row.querySelector(".order-weight");let order_length=Number(row.dataset.orderLength||(lengthInput?lengthInput.value:"0"))||0,order_quantity=parseInt(row.dataset.orderQuantity||(qtyInput?String(qtyInput.value):"0"),10)||0;return{material_number:material_number,length:order_length,weight:Number(row.dataset.orderWeight||(weightCell?(weightCell.textContent||"").replace(/[^0-9.]/g,""):"0"))||0,quantity:order_quantity,note:noteInput?(noteInput.value||"").trim():""}}));console.log("Submitting order items:",orderItems);const response=await fetch("/stock/submit_order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:Number(document.querySelector("#user-id").textContent.trim()),items:orderItems})});if(response.ok){const result=await response.json();result.success?(animateCartBadgeClear(),"undefined"!=typeof ordersManager&&ordersManager?setTimeout((()=>{ordersManager.refreshOrdersCount().catch((error=>{console.warn("Failed to refresh orders badge:",error)}))}),500):"undefined"!=typeof OrdersManager&&setTimeout((async()=>{try{const tempOrdersManager=new OrdersManager;await tempOrdersManager.getPendingOrdersCount(),tempOrdersManager.updateOrdersDisplay(tempOrdersManager.getCurrentPendingCount())}catch(error){console.warn("Failed to refresh orders badge with temp instance:",error)}}),500),orderId=result.order_id,document.getElementById("order-number").textContent=orderId,document.getElementById("order-time").textContent=(new Date).toLocaleString(),document.getElementById("order-success-modal").style.display="block",notifier.show(texts[lang].orderSubmitted,"success",3e3),setTimeout((async()=>{await loadCartData()}),350)):(notifier.show(result.message||texts[lang].operationFailed,"danger",4e3),setTimeout((async()=>{await loadCartData()}),350))}else notifier.show(texts[lang].serverError,"danger",4e3)}catch(error){console.error("Error submitting order:",error),notifier.show(texts[lang].networkError,"danger",4e3)}finally{isLoading=!1}var orderId}()})),document.getElementById("close-submit-modal").addEventListener("click",(()=>{hideSubmitConfirmModal()}));const saveTimers={};document.addEventListener("blur",(e=>{const target=e.target;if(target.classList.contains("order-length-input")||target.classList.contains("order-quantity-input")||target.classList.contains("order-note-input")){const row=target.closest("tr[data-material]");if(!row)return;(target.classList.contains("order-length-input")||target.classList.contains("order-quantity-input"))&&updateOrderWeight(target);const material=row.getAttribute("data-material");saveTimers[material]&&clearTimeout(saveTimers[material]),saveTimers[material]=setTimeout((()=>{const item=function(row){const material_number=row.getAttribute("data-material"),lengthInput=row.querySelector(".order-length-input"),qtyInput=row.querySelector(".order-quantity-input"),noteInput=row.querySelector(".order-note-input"),weightCell=row.querySelector(".order-weight");let order_length=Number(row.dataset.orderLength||(lengthInput?lengthInput.value:"0"))||0,quantity=parseInt(row.dataset.orderQuantity||(qtyInput?String(qtyInput.value):"0"),10)||0,order_weight=Number(row.dataset.orderWeight||(weightCell?(weightCell.textContent||"").replace(/[^0-9.]/g,""):"0"))||0;const note=noteInput?(noteInput.value||"").trim():"";return{material_number:material_number,order_length:order_length,quantity:quantity,order_weight:order_weight,note:note}}(row);!async function(item){try{const res=await fetch("/stock/save_cart_details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:Number(document.querySelector("#user-id").textContent.trim()),items:[item]})});if(!res.ok)return void console.warn("save_cart_details failed:",res.status);const result=await res.json();result.success||console.warn("save_cart_details response:",result)}catch(err){console.error("saveSingleCartDetail error:",err)}}(item),delete saveTimers[material]}),400)}}),!0),document.getElementById("close-success-modal").addEventListener("click",(()=>{hideOrderSuccessModal()})),document.getElementById("close-success").addEventListener("click",(()=>{hideOrderSuccessModal()})),document.addEventListener("click",(e=>{e.target.classList.contains("modal")&&hideAllModals()})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&hideAllModals()}))}(),loadCartData(),function(){const cartBadge=document.querySelector("#cart-count");cartBadge&&"none"===cartBadge.style.display&&setTimeout((()=>{cartData.total_count>0&&updateCartBadge(cartData.total_count)}),100)}(),function(){if("undefined"!=typeof OrdersManager)try{window.ordersManager||(window.ordersManager=new OrdersManager),window.ordersManager.init().catch((error=>{console.warn("Failed to initialize orders manager in cart page:",error)}))}catch(error){console.warn("OrdersManager not available in cart page:",error)}}()}function updateModalText(modalId,texts){const modal=document.querySelector(modalId);if(!modal)return;const title=modal.querySelector(".modal-header h3");title&&texts.title&&(title.textContent=texts.title);const body=modal.querySelector(".modal-body p");body&&texts.body&&(body.textContent=texts.body);const cancelBtn=modal.querySelector(".btn-secondary");cancelBtn&&texts.cancel&&(cancelBtn.textContent=texts.cancel);const confirmBtn=modal.querySelector(".btn-danger, .btn-success, .btn-primary");confirmBtn&&texts.confirm&&(confirmBtn.textContent=texts.confirm)}function updateOrderWeight(input){const row=input.closest("tr");if(!row)return;const stockLengthCell=row.querySelector(".stock-length"),stockWeightCell=row.querySelector(".stock-weight"),orderWeightCell=row.querySelector(".order-weight"),lengthInput=row.querySelector(".order-length-input"),qtyInput=row.querySelector(".order-quantity-input"),stockLength=stockLengthCell?Number((stockLengthCell.textContent||"").replace(/[^0-9.]/g,"")):0,stockWeight=stockWeightCell?Number((stockWeightCell.textContent||"").replace(/[^0-9.]/g,"")):0;let orderLength=lengthInput?Number(lengthInput.value):0;(!isFinite(orderLength)||orderLength<0)&&(orderLength=0);let orderQty=qtyInput?parseInt(String(qtyInput.value),10):0;if((!isFinite(orderQty)||orderQty<0)&&(orderQty=0),stockLength>0&&orderLength*orderQty>stockLength){const editedLength=input.classList.contains("order-length-input"),editedQty=input.classList.contains("order-quantity-input");if(editedLength&&orderQty>0){const maxLen=stockLength/orderQty,adjusted=Math.floor(maxLen);orderLength=adjusted,lengthInput&&(lengthInput.value=String(adjusted))}else if(editedQty&&orderLength>0){const maxQty=Math.floor(stockLength/orderLength);orderQty=maxQty,qtyInput&&(qtyInput.value=String(maxQty))}else if(orderQty>0){const maxLen=stockLength/orderQty,adjusted=Math.floor(maxLen);orderLength=adjusted,lengthInput&&(lengthInput.value=String(adjusted))}const warnMsg="en"===lang?"Total ordered length cannot exceed stock length. Adjusted to the maximum allowed.":"订购总长度不能超过库存长度，已自动调整到最大允许值";"undefined"!=typeof notifier&&notifier&&"function"==typeof notifier.show?notifier.show(warnMsg,"warning",2500):console.warn(warnMsg)}let result=0;if(stockLength>0&&isFinite(stockWeight)){result=orderLength*(stockWeight/stockLength)*orderQty}orderWeightCell&&(orderWeightCell.textContent=result.toFixed(1)),row.dataset.orderLength=String(orderLength),row.dataset.orderQuantity=String(orderQty),row.dataset.orderWeight=String(result)}async function loadCartData(){if(!isLoading)try{isLoading=!0,document.getElementById("cart-items-tbody").innerHTML=`\n            <tr>\n                <td colspan="13" class="loading-state">\n                    <div class="loading-content">\n                        <i class="fa fa-spinner fa-spin"></i>\n                        <p>${texts[lang].loading}</p>\n                    </div>\n                </td>\n            </tr>\n        `;const response=await fetch("/stock/get_cart_detail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:Number(document.querySelector("#user-id").textContent.trim())})});if(response.ok){const data=await response.json();cartData=data,function(){const tbody=document.getElementById("cart-items-tbody");if(0===cartData.items.length)return void(tbody.innerHTML=`\n                <tr>\n                    <td colspan="13" class="empty-cart">\n                        <div class="empty-cart-content">\n                            <i class="fa fa-shopping-cart"></i>\n                            <p>${texts[lang].noItems}</p>\n                        </div>\n                    </td>\n                </tr>\n            `);const deleteText="en"===lang?"Delete":"删除";let html="";cartData.items.forEach(((item,index)=>{const lowStockClass=item.low_stock?"low-stock-warning":"",stockLengthDisplay=item.low_stock?`<span class="low-stock-indicator">${item.stock_length}</span>`:item.stock_length,translatedStatus="en"===lang&&"undefined"!=typeof Translator?Translator.translateStatus(item.status,"en"):item.status,translatedProductName=("en"===lang&&"undefined"!=typeof Translator?Translator.translateManufacturer(item.manufacturer,"en"):item.manufacturer,"en"===lang&&"undefined"!=typeof Translator?Translator.translateProductName(item.product_name,"en"):item.product_name);html+=`\n                <tr data-material="${item.material_number}" class="${lowStockClass}">\n                    <td width="4%">${index+1}</td>\n                    <td>${translatedProductName}</td>\n                    <td>${item.cz}</td>\n                    <td>${item.material_number}</td>\n                    <td>${item.specification}</td>\n                    <td>${translatedStatus}</td>\n                    <td class="stock-length">${stockLengthDisplay}</td>\n                    <td class="stock-weight">${item.stock_weight.toFixed(1)}</td>\n                    <td><input class="order-length-input form-control input-sm" data-material="${item.material_number}" value="${item.order_length}"></td>\n                    <td width="6%"><input class="order-quantity-input form-control input-sm" data-material="${item.material_number}" value="${item.quantity}"></td>\n                    <td class="order-weight">${item.order_weight.toFixed(1)}</td>\n                    <td width="15%"><input class="order-note-input form-control input-sm" style="text-align: left;" data-material="${item.material_number}" value="${item.note||""}"></td>\n                    <td>\n                        <button class="btn btn-sm btn-danger"\n                                onclick="showDeleteConfirmModal('${item.material_number}', '${item.product_name}', '${item.cz}', '${item.specification}')">\n                            <i class="fa fa-trash"></i>\n                            ${deleteText}\n                        </button>\n                    </td>\n                </tr>\n            `})),tbody.innerHTML=html,fixTableHeaderAlignment()}(),document.getElementById("total-items").textContent=cartData.total_count||0,document.getElementById("total-length").textContent=`${cartData.total_length||0} mm`,document.getElementById("total-weight").textContent=`${(cartData.total_weight||0).toFixed(2)} kg`,updateCartBadge(cartData.total_count||0),updateCartBadge(cartData.total_count||0)}else console.error("Failed to load cart data:",response.status),notifier.show(texts[lang].serverError,"danger",4e3)}catch(error){console.error("Error loading cart data:",error),notifier.show(texts[lang].networkError,"danger",4e3)}finally{isLoading=!1}}function fixTableHeaderAlignment(){const table=document.querySelector(".table-cart table"),thead=table.querySelector("thead"),tbody=table.querySelector("tbody");if(!thead||!tbody)return;const scrollbarWidth=tbody.offsetWidth-tbody.clientWidth;thead.style.width=scrollbarWidth>0?`calc(100% - ${scrollbarWidth}px)`:"100%";new ResizeObserver((()=>{const newScrollbarWidth=tbody.offsetWidth-tbody.clientWidth;thead.style.width=newScrollbarWidth>0?`calc(100% - ${newScrollbarWidth}px)`:"100%"})).observe(tbody)}function hideDeleteConfirmModal(){document.getElementById("confirm-delete-modal").style.display="none",currentDeleteItem=null}function hideClearConfirmModal(){document.getElementById("confirm-clear-modal").style.display="none"}function hideOrderSuccessModal(){document.getElementById("order-success-modal").style.display="none"}function hideSubmitConfirmModal(){document.getElementById("confirm-submit-modal").style.display="none"}function hideAllModals(){hideDeleteConfirmModal(),hideClearConfirmModal(),hideSubmitConfirmModal(),hideOrderSuccessModal()}function updateCartBadge(count){const cartBadge=document.querySelector("#cart-count");cartBadge&&(count>0?(cartBadge.textContent=count,cartBadge.style.display="flex"):cartBadge.style.display="none")}function animateCartBadgeClear(){const cartBadge=document.querySelector("#cart-count");cartBadge&&(cartBadge.classList.add("cart-count-clear"),setTimeout((()=>{cartBadge.style.display="none",cartBadge.classList.remove("cart-count-clear")}),300))}window.showDeleteConfirmModal=function(materialNumber,productName,cz,productSize){currentDeleteItem=materialNumber;const itemInfo=document.getElementById("delete-item-info");itemInfo.innerHTML="en"===lang?`\n                <div class="item-details">\n                    <strong>Product Name:</strong> ${productName}<br>\n                    <strong>Material:</strong> ${cz}<br>\n                    <strong>Specification:</strong> ${productSize}<br>\n                    <strong>Stock No.:</strong> ${materialNumber}\n                </div>\n            `:`\n                <div class="item-details">\n                    <strong>商品名称：</strong>${productName}<br>\n                    <strong>材质：</strong>${cz}<br>\n                    <strong>规格型号：</strong>${productSize}<br>\n                    <strong>物料号：</strong>${materialNumber}\n                </div>\n            `,document.getElementById("confirm-delete-modal").style.display="block"},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initPage):initPage(),window.addEventListener("resize",(()=>{setTimeout(fixTableHeaderAlignment,100)}))}();