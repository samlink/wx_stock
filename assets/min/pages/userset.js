import{notifier}from"../parts/notifier.mjs";function theme_set(){let themes=document.querySelectorAll(".themes");for(let theme of themes)theme.addEventListener("click",(function(){var theme_name={name:this.dataset.theme};fetch(`/${code}/change_theme`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(theme_name)}).then((res=>res.json())).then((data=>{location.reload()}))}))}document.querySelector("#pass-button").addEventListener("click",(function(event){event.preventDefault();var old_pass=document.querySelector("#old-pass").value.trim(),new_pass=document.querySelector("#new-pass").value.trim(),confirm_pass=document.querySelector("#confirm-pass").value.trim();if(""==old_pass||""==new_pass||""==confirm_pass)return notifier.show("密码不能为空","danger"),!1;if(new_pass!=confirm_pass)return notifier.show("两次密码输入不一致","danger"),!1;var password={old_pass:old_pass,new_pass:new_pass};fetch(`/${code}/change_pass`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(password)}).then((res=>res.json())).then((data=>{0!=data?notifier.show("密码修改成功","success"):notifier.show("原密码输入有误","danger")}))})),theme_set(),document.querySelector("#phone-button").addEventListener("click",(function(event){event.preventDefault();var phone_number=document.querySelector("#phone").value.trim();if(""!=phone_number&&!phone_number.match(/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/))return notifier.show("手机号码错误","danger"),!1;var phone={phone_number:phone_number};fetch(`/${code}/phone_number`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(phone)}).then((res=>res.json())).then((data=>{0!=data?notifier.show("手机号设置成功","success"):notifier.show("手机号设置错误","danger")}))}));